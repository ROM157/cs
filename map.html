<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
	<style type="text/css">
		body, html {width: 100%;height: 100%;margin:0;font-family:"微软雅黑";}
		#map{width:90%;height:400px;margin: 0 auto;}
	</style>
	<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=DFyiTYYMBPr9seqkOZ7AnXs1DsZC26lt"></script>
	<title>address</title>
</head>
<body>
	<div id="map"></div>
</body>
</html>
<script type="text/javascript">
	// 百度地图API功能
	var sContent ="<img style='float:right;margin:4px' id='imgDemo' src='images/xiaoniao_icon.png' width='96' height='96' title='小鸟'/>" + 	"<p style='margin:0;line-height:1.5;font-size:13px;'>地址：北京市昌平区站前东街2号<br/>电话：(010)028-8888888<br/>简介：田园风光综合商业楼3层，为小鸟掌学综合研发及办公地址。</p>" + "</div>";
	var map = new BMap.Map("map");
	var point = new BMap.Point(116.356158, 40.09425);
	var marker = new BMap.Marker(point);
	var infoWindow = new BMap.InfoWindow(sContent);  // 创建信息窗口对象
	map.centerAndZoom(point, 15);
	map.addOverlay(marker);
	var top_left_control = new BMap.ScaleControl({anchor: BMAP_ANCHOR_BOTTOM_LEFT});// 左下角，添加比例尺
	var top_left_navigation = new BMap.NavigationControl();  //左上角，添加默认缩放平移控件
		map.addControl(top_left_control);        
		map.addControl(top_left_navigation); 
	marker.addEventListener("click", function(){          
	   this.openInfoWindow(infoWindow);
	   //图片加载完毕重绘infowindow
	   document.getElementById('imgDemo').onload = function (){
         infoWindow.redraw();   //防止在网速较慢，图片未加载时，生成的信息框高度比图片的总高度小，导致图片部分被隐藏
	   }
	});
	var mapType2 = new BMap.MapTypeControl({anchor: BMAP_ANCHOR_TOP_RIGHT});	
	//添加地图类型和缩略图
		map.addControl(mapType2);          //左上角，默认地图控件
		map.setCurrentCity("平西府");        //由于有3D图，需要设置城市哦
      //创建和初始化地图函数：
    function initMap(){
      setMapEvent();//设置地图事件
      addMapControl();//向地图添加控件
    }
    
    function setMapEvent(){
      map.enableKeyboard();
      map.enableDragging();
      map.enableDoubleClickZoom()
    }
    function addClickHandler(target,window){
      target.addEventListener("click",function(){
        target.openInfoWindow(window);
      });
    }

    function addMapControl(){
      var scaleControl = new BMap.ScaleControl({anchor:BMAP_ANCHOR_BOTTOM_LEFT});
      scaleControl.setUnit(BMAP_UNIT_METRIC);
      map.addControl(scaleControl);
      var navControl = new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:0});
      map.addControl(navControl);
    }
    initMap();
</script>
